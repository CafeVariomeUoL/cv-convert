<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving, ExistentialQuantification #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Runtime.Types</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">withText</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FromJSON</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.:)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.:?)</span></span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Parser</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unexpected</span></span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.String.Conv</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toS</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">join</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadPlus</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mzero</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span>          </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">JSONSchema.Draft4.Schema</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Schema</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.IO</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Handle</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="DB.html"><span class="hs-identifier">DB</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-comment">{-|
Type encoding the input document type along with potential parsing/processing options.
-}</span><span>
</span><span id="line-21"></span><span id="local-6989586621679569782"><span id="local-6989586621679569783"></span></span><span class="hs-keyword">data</span><span> </span><span id="FileType"><span class="annot"><a href="Runtime.Types.html#FileType"><span class="hs-identifier hs-var">FileType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TXTFile"><span class="annot"><a href="Runtime.Types.html#TXTFile"><span class="hs-identifier hs-var">TXTFile</span></a></span></span><span> </span><span class="hs-special">{</span><span id="startFromLine"><span class="annot"><span class="annottext">FileType -&gt; Int
</span><a href="Runtime.Types.html#startFromLine"><span class="hs-identifier hs-var hs-var">startFromLine</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">}</span><span> </span><span>
</span><span id="line-22"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="JSONFile"><span class="annot"><a href="Runtime.Types.html#JSONFile"><span class="hs-identifier hs-var">JSONFile</span></a></span></span><span>
</span><span id="line-23"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="CSVFile"><span class="annot"><a href="Runtime.Types.html#CSVFile"><span class="hs-identifier hs-var">CSVFile</span></a></span></span><span>
</span><span id="line-24"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="XLSXFile"><span class="annot"><a href="Runtime.Types.html#XLSXFile"><span class="hs-identifier hs-var">XLSXFile</span></a></span></span><span> </span><span class="hs-special">{</span><span id="sheetName"><span class="annot"><span class="annottext">FileType -&gt; Maybe SheetName
</span><a href="Runtime.Types.html#sheetName"><span class="hs-identifier hs-var hs-var">sheetName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#SheetName"><span class="hs-identifier hs-type">SheetName</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679569772"><span id="local-6989586621679569774"><span class="annot"><span class="annottext">FileType -&gt; FileType -&gt; Bool
(FileType -&gt; FileType -&gt; Bool)
-&gt; (FileType -&gt; FileType -&gt; Bool) -&gt; Eq FileType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: FileType -&gt; FileType -&gt; Bool
$c/= :: FileType -&gt; FileType -&gt; Bool
== :: FileType -&gt; FileType -&gt; Bool
$c== :: FileType -&gt; FileType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. FileType -&gt; Rep FileType x)
-&gt; (forall x. Rep FileType x -&gt; FileType) -&gt; Generic FileType
forall x. Rep FileType x -&gt; FileType
forall x. FileType -&gt; Rep FileType x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep FileType x -&gt; FileType
$cfrom :: forall x. FileType -&gt; Rep FileType x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">data</span><span> </span><span id="Specified"><span class="annot"><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-var">Specified</span></a></span></span><span> </span><span id="local-6989586621679569832"><span class="annot"><a href="#local-6989586621679569832"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Specified"><span class="annot"><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-var">Specified</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679569832"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Inferred"><span class="annot"><a href="Runtime.Types.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679569832"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Unspecified"><span class="annot"><a href="Runtime.Types.html#Unspecified"><span class="hs-identifier hs-var">Unspecified</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679569759"><span id="local-6989586621679569761"><span id="local-6989586621679569763"><span class="annot"><span class="annottext">Int -&gt; Specified a -&gt; ShowS
[Specified a] -&gt; ShowS
Specified a -&gt; String
(Int -&gt; Specified a -&gt; ShowS)
-&gt; (Specified a -&gt; String)
-&gt; ([Specified a] -&gt; ShowS)
-&gt; Show (Specified a)
forall a. Show a =&gt; Int -&gt; Specified a -&gt; ShowS
forall a. Show a =&gt; [Specified a] -&gt; ShowS
forall a. Show a =&gt; Specified a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Specified a] -&gt; ShowS
$cshowList :: forall a. Show a =&gt; [Specified a] -&gt; ShowS
show :: Specified a -&gt; String
$cshow :: forall a. Show a =&gt; Specified a -&gt; String
showsPrec :: Int -&gt; Specified a -&gt; ShowS
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; Specified a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679569754"><span id="local-6989586621679569756"><span class="annot"><span class="annottext">Specified a -&gt; Specified a -&gt; Bool
(Specified a -&gt; Specified a -&gt; Bool)
-&gt; (Specified a -&gt; Specified a -&gt; Bool) -&gt; Eq (Specified a)
forall a. Eq a =&gt; Specified a -&gt; Specified a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Specified a -&gt; Specified a -&gt; Bool
$c/= :: forall a. Eq a =&gt; Specified a -&gt; Specified a -&gt; Bool
== :: Specified a -&gt; Specified a -&gt; Bool
$c== :: forall a. Eq a =&gt; Specified a -&gt; Specified a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679569749"><span id="local-6989586621679569752"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#FileType"><span class="hs-identifier hs-type">FileType</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span>
</span><span id="line-32"></span><span>  </span><span id="local-6989586621679569748"><span class="annot"><span class="annottext">show :: FileType -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span id="local-6989586621679569746"><span class="annot"><a href="Runtime.Types.html#TXTFile"><span class="hs-identifier hs-type">TXTFile</span></a></span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;TXT&quot;</span></span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#JSONFile"><span class="hs-identifier hs-type">JSONFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;JSON&quot;</span></span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#CSVFile"><span class="hs-identifier hs-type">CSVFile</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;CSV&quot;</span></span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span id="local-6989586621679569745"><span class="annot"><a href="Runtime.Types.html#XLSXFile"><span class="hs-identifier hs-type">XLSXFile</span></a></span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-string">&quot;XLSX&quot;</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-comment">{-|
Parses a file extension, such as @.txt@ into 'TXTFile'. 
Returns 'Nothing' if the extension does not mach any of the 'FileType's.
-}</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- readFileType :: Maybe Int -&gt; Maybe SheetName -&gt; Maybe String -&gt; FileType</span><span>
</span><span id="line-42"></span><span class="annot"><a href="Runtime.Types.html#parseFileType"><span class="hs-identifier hs-type">parseFileType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#SheetName"><span class="hs-identifier hs-type">SheetName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-type">Specified</span></a></span><span> </span><span class="annot"><a href="Runtime.Types.html#FileType"><span class="hs-identifier hs-type">FileType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span id="parseFileType"><span class="annot"><span class="annottext">parseFileType :: Maybe Int
-&gt; Maybe SheetName -&gt; Maybe Text -&gt; Parser (Specified FileType)
</span><a href="Runtime.Types.html#parseFileType"><span class="hs-identifier hs-var hs-var">parseFileType</span></a></span></span><span> </span><span id="local-6989586621679569743"><span class="annot"><span class="annottext">startFrom :: Maybe Int
</span><a href="#local-6989586621679569743"><span class="hs-identifier hs-var">startFrom</span></a></span></span><span> </span><span id="local-6989586621679569742"><span class="annot"><span class="annottext">sheetName :: Maybe SheetName
</span><a href="#local-6989586621679569742"><span class="hs-identifier hs-var">sheetName</span></a></span></span><span> </span><span id="local-6989586621679569741"><span class="annot"><span class="annottext">s :: Maybe Text
</span><a href="#local-6989586621679569741"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679569741"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-string">&quot;txt&quot;</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Specified FileType -&gt; Parser (Specified FileType))
-&gt; Specified FileType -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType -&gt; Specified FileType
forall a. a -&gt; Specified a
</span><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-var">Specified</span></a></span><span> </span><span class="annot"><span class="annottext">(FileType -&gt; Specified FileType) -&gt; FileType -&gt; Specified FileType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; FileType
</span><a href="Runtime.Types.html#TXTFile"><span class="hs-identifier hs-var">TXTFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679569743"><span class="hs-identifier hs-var">startFrom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-string">&quot;json&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Specified FileType -&gt; Parser (Specified FileType))
-&gt; Specified FileType -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType -&gt; Specified FileType
forall a. a -&gt; Specified a
</span><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-var">Specified</span></a></span><span> </span><span class="annot"><span class="annottext">(FileType -&gt; Specified FileType) -&gt; FileType -&gt; Specified FileType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="Runtime.Types.html#JSONFile"><span class="hs-identifier hs-var">JSONFile</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-string">&quot;csv&quot;</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Specified FileType -&gt; Parser (Specified FileType))
-&gt; Specified FileType -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType -&gt; Specified FileType
forall a. a -&gt; Specified a
</span><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-var">Specified</span></a></span><span> </span><span class="annot"><span class="annottext">(FileType -&gt; Specified FileType) -&gt; FileType -&gt; Specified FileType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="Runtime.Types.html#CSVFile"><span class="hs-identifier hs-var">CSVFile</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-string">&quot;xlsx&quot;</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Specified FileType -&gt; Parser (Specified FileType))
-&gt; Specified FileType -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType -&gt; Specified FileType
forall a. a -&gt; Specified a
</span><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-var">Specified</span></a></span><span> </span><span class="annot"><span class="annottext">(FileType -&gt; Specified FileType) -&gt; FileType -&gt; Specified FileType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe SheetName -&gt; FileType
</span><a href="Runtime.Types.html#XLSXFile"><span class="hs-identifier hs-var">XLSXFile</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SheetName
</span><a href="#local-6989586621679569742"><span class="hs-identifier hs-var">sheetName</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679569740"><span class="annot"><span class="annottext">unknown :: Text
</span><a href="#local-6989586621679569740"><span class="hs-identifier hs-var">unknown</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Specified FileType)
forall a. Value -&gt; Parser a
</span><span class="hs-identifier hs-var">unexpected</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser (Specified FileType))
-&gt; Value -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569740"><span class="hs-identifier hs-var">unknown</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679569743"><span class="hs-identifier hs-var">startFrom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe SheetName
</span><a href="#local-6989586621679569742"><span class="hs-identifier hs-var">sheetName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Specified FileType -&gt; Parser (Specified FileType))
-&gt; Specified FileType -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType -&gt; Specified FileType
forall a. a -&gt; Specified a
</span><a href="Runtime.Types.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a></span><span> </span><span class="annot"><span class="annottext">(FileType -&gt; Specified FileType) -&gt; FileType -&gt; Specified FileType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; FileType
</span><a href="Runtime.Types.html#TXTFile"><span class="hs-identifier hs-var">TXTFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679569743"><span class="hs-identifier hs-var">startFrom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Specified FileType -&gt; Parser (Specified FileType))
-&gt; Specified FileType -&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileType -&gt; Specified FileType
forall a. a -&gt; Specified a
</span><a href="Runtime.Types.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a></span><span> </span><span class="annot"><span class="annottext">(FileType -&gt; Specified FileType) -&gt; FileType -&gt; Specified FileType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe SheetName -&gt; FileType
</span><a href="Runtime.Types.html#XLSXFile"><span class="hs-identifier hs-var">XLSXFile</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SheetName
</span><a href="#local-6989586621679569742"><span class="hs-identifier hs-var">sheetName</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-identifier">_</span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Specified FileType -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Specified FileType
forall a. Specified a
</span><a href="Runtime.Types.html#Unspecified"><span class="hs-identifier hs-var">Unspecified</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-type">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-type">Specified</span></a></span><span> </span><span class="annot"><a href="Runtime.Types.html#FileType"><span class="hs-identifier hs-type">FileType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Runtime.Types.html#FileType"><span class="hs-identifier hs-type">FileType</span></a></span><span>
</span><span id="line-57"></span><span id="fromSpecifiedFileType"><span class="annot"><span class="annottext">fromSpecifiedFileType :: String -&gt; Specified FileType -&gt; FileType
</span><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var hs-var">fromSpecifiedFileType</span></a></span></span><span> </span><span class="hs-identifier">_</span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-type">Specified</span></a></span><span> </span><span id="local-6989586621679569737"><span class="annot"><span class="annottext">fileType :: FileType
</span><a href="#local-6989586621679569737"><span class="hs-identifier hs-var">fileType</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="#local-6989586621679569737"><span class="hs-identifier hs-var">fileType</span></a></span><span>
</span><span id="line-58"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-string">&quot;xlsx&quot;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#Inferred"><span class="hs-identifier hs-type">Inferred</span></a></span><span> </span><span id="local-6989586621679569736"><span class="annot"><span class="annottext">fileType :: FileType
</span><a href="#local-6989586621679569736"><span class="hs-identifier hs-var">fileType</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#XLSXFile"><span class="hs-identifier hs-type">XLSXFile</span></a></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="#local-6989586621679569736"><span class="hs-identifier hs-var">fileType</span></a></span><span>
</span><span id="line-59"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-string">&quot;txt&quot;</span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#Inferred"><span class="hs-identifier hs-type">Inferred</span></a></span><span> </span><span id="local-6989586621679569735"><span class="annot"><span class="annottext">fileType :: FileType
</span><a href="#local-6989586621679569735"><span class="hs-identifier hs-var">fileType</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#TXTFile"><span class="hs-identifier hs-type">TXTFile</span></a></span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="#local-6989586621679569735"><span class="hs-identifier hs-var">fileType</span></a></span><span>
</span><span id="line-60"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-string">&quot;json&quot;</span><span> </span><span class="hs-identifier">_</span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="Runtime.Types.html#JSONFile"><span class="hs-identifier hs-var">JSONFile</span></a></span><span>
</span><span id="line-61"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-string">&quot;csv&quot;</span><span>  </span><span class="hs-identifier">_</span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileType
</span><a href="Runtime.Types.html#CSVFile"><span class="hs-identifier hs-var">CSVFile</span></a></span><span>
</span><span id="line-62"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-string">&quot;xlsx&quot;</span><span> </span><span class="hs-identifier">_</span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SheetName -&gt; FileType
</span><a href="Runtime.Types.html#XLSXFile"><span class="hs-identifier hs-var">XLSXFile</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SheetName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-63"></span><span class="annot"><a href="Runtime.Types.html#fromSpecifiedFileType"><span class="hs-identifier hs-var">fromSpecifiedFileType</span></a></span><span> </span><span class="hs-identifier">_</span><span>      </span><span class="hs-identifier">_</span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FileType
</span><a href="Runtime.Types.html#TXTFile"><span class="hs-identifier hs-var">TXTFile</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-comment">{-|
Data type used to describe the error reporting/handling behaviour when processing a row. 
Other than 'Terminate, all other options result in the error from a row being recorded/printed,
with the computation continuing onto the next row.
-}</span><span>
</span><span id="line-71"></span><span id="local-6989586621679569733"><span id="local-6989586621679569734"></span></span><span class="hs-keyword">data</span><span> </span><span id="ErrorOpt"><span class="annot"><a href="Runtime.Types.html#ErrorOpt"><span class="hs-identifier hs-var">ErrorOpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Terminate"><span class="annot"><a href="Runtime.Types.html#Terminate"><span class="hs-identifier hs-var">Terminate</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="LogToConsole"><span class="annot"><a href="Runtime.Types.html#LogToConsole"><span class="hs-identifier hs-var">LogToConsole</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="LogToFile"><span class="annot"><a href="Runtime.Types.html#LogToFile"><span class="hs-identifier hs-var">LogToFile</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Log"><span class="annot"><a href="Runtime.Types.html#Log"><span class="hs-identifier hs-var">Log</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679569723"><span id="local-6989586621679569725"><span id="local-6989586621679569727"><span class="annot"><span class="annottext">Int -&gt; ErrorOpt -&gt; ShowS
[ErrorOpt] -&gt; ShowS
ErrorOpt -&gt; String
(Int -&gt; ErrorOpt -&gt; ShowS)
-&gt; (ErrorOpt -&gt; String) -&gt; ([ErrorOpt] -&gt; ShowS) -&gt; Show ErrorOpt
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ErrorOpt] -&gt; ShowS
$cshowList :: [ErrorOpt] -&gt; ShowS
show :: ErrorOpt -&gt; String
$cshow :: ErrorOpt -&gt; String
showsPrec :: Int -&gt; ErrorOpt -&gt; ShowS
$cshowsPrec :: Int -&gt; ErrorOpt -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679569719"><span id="local-6989586621679569721"><span class="annot"><span class="annottext">ErrorOpt -&gt; ErrorOpt -&gt; Bool
(ErrorOpt -&gt; ErrorOpt -&gt; Bool)
-&gt; (ErrorOpt -&gt; ErrorOpt -&gt; Bool) -&gt; Eq ErrorOpt
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ErrorOpt -&gt; ErrorOpt -&gt; Bool
$c/= :: ErrorOpt -&gt; ErrorOpt -&gt; Bool
== :: ErrorOpt -&gt; ErrorOpt -&gt; Bool
$c== :: ErrorOpt -&gt; ErrorOpt -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ErrorOpt -&gt; Rep ErrorOpt x)
-&gt; (forall x. Rep ErrorOpt x -&gt; ErrorOpt) -&gt; Generic ErrorOpt
forall x. Rep ErrorOpt x -&gt; ErrorOpt
forall x. ErrorOpt -&gt; Rep ErrorOpt x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ErrorOpt x -&gt; ErrorOpt
$cfrom :: forall x. ErrorOpt -&gt; Rep ErrorOpt x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679569714"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#ErrorOpt"><span class="hs-identifier hs-type">ErrorOpt</span></a></span></span><span> </span><span class="hs-keyword">where</span><span> </span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679569712"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser ErrorOpt
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Text -&gt; Parser ErrorOpt) -&gt; Value -&gt; Parser ErrorOpt
forall a. String -&gt; (Text -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">withText</span></span><span> </span><span class="annot"><span class="hs-string">&quot;ErrorOpt&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Text -&gt; Parser ErrorOpt) -&gt; Value -&gt; Parser ErrorOpt)
-&gt; (Text -&gt; Parser ErrorOpt) -&gt; Value -&gt; Parser ErrorOpt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span>
</span><span id="line-76"></span><span>    </span><span id="local-6989586621679569710"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621679569710"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569710"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="hs-string">&quot;terminate&quot;</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ErrorOpt -&gt; Parser ErrorOpt
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ErrorOpt
</span><a href="Runtime.Types.html#Terminate"><span class="hs-identifier hs-var">Terminate</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span id="local-6989586621679569709"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621679569709"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569709"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="hs-string">&quot;log_to_console&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ErrorOpt -&gt; Parser ErrorOpt
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ErrorOpt
</span><a href="Runtime.Types.html#LogToConsole"><span class="hs-identifier hs-var">LogToConsole</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621679569708"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621679569708"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569708"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="hs-string">&quot;log_to_file&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ErrorOpt -&gt; Parser ErrorOpt
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ErrorOpt
</span><a href="Runtime.Types.html#LogToFile"><span class="hs-identifier hs-var">LogToFile</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span id="local-6989586621679569707"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621679569707"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569707"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="hs-string">&quot;log&quot;</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ErrorOpt -&gt; Parser ErrorOpt
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ErrorOpt -&gt; Parser ErrorOpt) -&gt; ErrorOpt -&gt; Parser ErrorOpt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ErrorOpt
</span><a href="Runtime.Types.html#Log"><span class="hs-identifier hs-var">Log</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span id="local-6989586621679569706"><span class="annot"><span class="annottext">s :: Text
</span><a href="#local-6989586621679569706"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser ErrorOpt
forall a. Value -&gt; Parser a
</span><span class="hs-identifier hs-var">unexpected</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser ErrorOpt) -&gt; Value -&gt; Parser ErrorOpt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569706"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621679569704"><span id="local-6989586621679569705"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="SheetName"><span class="annot"><a href="Runtime.Types.html#SheetName"><span class="hs-identifier hs-var">SheetName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SheetName"><span class="annot"><a href="Runtime.Types.html#SheetName"><span class="hs-identifier hs-var">SheetName</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unSheetName"><span class="annot"><span class="annottext">SheetName -&gt; Text
</span><a href="Runtime.Types.html#unSheetName"><span class="hs-identifier hs-var hs-var">unSheetName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">}</span><span> </span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621679569696"><span id="local-6989586621679569698"><span id="local-6989586621679569700"><span class="annot"><span class="annottext">Int -&gt; SheetName -&gt; ShowS
[SheetName] -&gt; ShowS
SheetName -&gt; String
(Int -&gt; SheetName -&gt; ShowS)
-&gt; (SheetName -&gt; String)
-&gt; ([SheetName] -&gt; ShowS)
-&gt; Show SheetName
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SheetName] -&gt; ShowS
$cshowList :: [SheetName] -&gt; ShowS
show :: SheetName -&gt; String
$cshow :: SheetName -&gt; String
showsPrec :: Int -&gt; SheetName -&gt; ShowS
$cshowsPrec :: Int -&gt; SheetName -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679569692"><span id="local-6989586621679569694"><span class="annot"><span class="annottext">SheetName -&gt; SheetName -&gt; Bool
(SheetName -&gt; SheetName -&gt; Bool)
-&gt; (SheetName -&gt; SheetName -&gt; Bool) -&gt; Eq SheetName
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SheetName -&gt; SheetName -&gt; Bool
$c/= :: SheetName -&gt; SheetName -&gt; Bool
== :: SheetName -&gt; SheetName -&gt; Bool
$c== :: SheetName -&gt; SheetName -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. SheetName -&gt; Rep SheetName x)
-&gt; (forall x. Rep SheetName x -&gt; SheetName) -&gt; Generic SheetName
forall x. Rep SheetName x -&gt; SheetName
forall x. SheetName -&gt; Rep SheetName x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SheetName x -&gt; SheetName
$cfrom :: forall x. SheetName -&gt; Rep SheetName x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span id="local-6989586621679569686"><span id="local-6989586621679569688"><span class="annot"><span class="annottext">Value -&gt; Parser [SheetName]
Value -&gt; Parser SheetName
(Value -&gt; Parser SheetName)
-&gt; (Value -&gt; Parser [SheetName]) -&gt; FromJSON SheetName
forall a.
(Value -&gt; Parser a) -&gt; (Value -&gt; Parser [a]) -&gt; FromJSON a
parseJSONList :: Value -&gt; Parser [SheetName]
$cparseJSONList :: Value -&gt; Parser [SheetName]
parseJSON :: Value -&gt; Parser SheetName
$cparseJSON :: Value -&gt; Parser SheetName
</span><a href="#local-6989586621679569686"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">FromJSON</span></a></span></span></span><span> </span><span class="hs-comment">-- we need to derive this as newtype, so the JSON parsing treats SheetName same as just Text</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621679569684"><span id="local-6989586621679569685"></span></span><span class="hs-keyword">data</span><span> </span><span id="LibFunctions"><span class="annot"><a href="Runtime.Types.html#LibFunctions"><span class="hs-identifier hs-var">LibFunctions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Inline"><span class="annot"><a href="Runtime.Types.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-91"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="External"><span class="annot"><a href="Runtime.Types.html#External"><span class="hs-identifier hs-var">External</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-92"></span><span>                      </span><span id="url"><span class="annot"><span class="annottext">LibFunctions -&gt; Text
</span><a href="Runtime.Types.html#url"><span class="hs-identifier hs-var hs-var">url</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-93"></span><span>                    </span><span class="hs-special">,</span><span> </span><span id="hash"><span class="annot"><span class="annottext">LibFunctions -&gt; ByteString
</span><a href="Runtime.Types.html#hash"><span class="hs-identifier hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span>
</span><span id="line-94"></span><span>                    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679569674"><span id="local-6989586621679569676"><span id="local-6989586621679569678"><span class="annot"><span class="annottext">Int -&gt; LibFunctions -&gt; ShowS
[LibFunctions] -&gt; ShowS
LibFunctions -&gt; String
(Int -&gt; LibFunctions -&gt; ShowS)
-&gt; (LibFunctions -&gt; String)
-&gt; ([LibFunctions] -&gt; ShowS)
-&gt; Show LibFunctions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [LibFunctions] -&gt; ShowS
$cshowList :: [LibFunctions] -&gt; ShowS
show :: LibFunctions -&gt; String
$cshow :: LibFunctions -&gt; String
showsPrec :: Int -&gt; LibFunctions -&gt; ShowS
$cshowsPrec :: Int -&gt; LibFunctions -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679569670"><span id="local-6989586621679569672"><span class="annot"><span class="annottext">LibFunctions -&gt; LibFunctions -&gt; Bool
(LibFunctions -&gt; LibFunctions -&gt; Bool)
-&gt; (LibFunctions -&gt; LibFunctions -&gt; Bool) -&gt; Eq LibFunctions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: LibFunctions -&gt; LibFunctions -&gt; Bool
$c/= :: LibFunctions -&gt; LibFunctions -&gt; Bool
== :: LibFunctions -&gt; LibFunctions -&gt; Bool
$c== :: LibFunctions -&gt; LibFunctions -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. LibFunctions -&gt; Rep LibFunctions x)
-&gt; (forall x. Rep LibFunctions x -&gt; LibFunctions)
-&gt; Generic LibFunctions
forall x. Rep LibFunctions x -&gt; LibFunctions
forall x. LibFunctions -&gt; Rep LibFunctions x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep LibFunctions x -&gt; LibFunctions
$cfrom :: forall x. LibFunctions -&gt; Rep LibFunctions x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679569665"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#LibFunctions"><span class="hs-identifier hs-type">LibFunctions</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621679569664"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser LibFunctions
</span><a href="#local-6989586621679569664"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Object</span></span><span> </span><span id="local-6989586621679569662"><span class="annot"><span class="annottext">v :: Object
</span><a href="#local-6989586621679569662"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; ByteString -&gt; LibFunctions
</span><a href="Runtime.Types.html#External"><span class="hs-identifier hs-var">External</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString -&gt; LibFunctions)
-&gt; Parser Text -&gt; Parser (ByteString -&gt; LibFunctions)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569662"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;url&quot;</span></span><span>
</span><span id="line-99"></span><span>            </span><span class="annot"><span class="annottext">Parser (ByteString -&gt; LibFunctions)
-&gt; Parser ByteString -&gt; Parser LibFunctions
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ByteString
forall a b. StringConv a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">toS</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ByteString) -&gt; Parser Text -&gt; Parser ByteString
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569662"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="hs-string">&quot;hash&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span id="local-6989586621679569660"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621679569660"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LibFunctions -&gt; Parser LibFunctions
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LibFunctions -&gt; Parser LibFunctions)
-&gt; LibFunctions -&gt; Parser LibFunctions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; LibFunctions
</span><a href="Runtime.Types.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; LibFunctions) -&gt; ByteString -&gt; LibFunctions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
forall a b. StringConv a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">toS</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679569660"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser LibFunctions
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">{-|
Internal representation of a '.settings' file.
-}</span><span>
</span><span id="line-106"></span><span id="local-6989586621679569658"><span id="local-6989586621679569659"></span></span><span class="hs-keyword">data</span><span> </span><span id="Settings"><span class="annot"><a href="Runtime.Types.html#Settings"><span class="hs-identifier hs-var">Settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Settings"><span class="annot"><a href="Runtime.Types.html#Settings"><span class="hs-identifier hs-var">Settings</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span>
</span><span id="line-107"></span><span>  </span><span id="processFunction"><span class="annot"><span class="annottext">Settings -&gt; Text
</span><a href="Runtime.Types.html#processFunction"><span class="hs-identifier hs-var hs-var">processFunction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-comment">-- ^ A string containg the JS function which will be applied to the input</span><span>
</span><span id="line-108"></span><span class="hs-special">,</span><span> </span><span id="libraryFunctions"><span class="annot"><span class="annottext">Settings -&gt; Maybe LibFunctions
</span><a href="Runtime.Types.html#libraryFunctions"><span class="hs-identifier hs-var hs-var">libraryFunctions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#LibFunctions"><span class="hs-identifier hs-type">LibFunctions</span></a></span><span>
</span><span id="line-109"></span><span class="hs-special">,</span><span> </span><span id="jsonSchema"><span class="annot"><span class="annottext">Settings -&gt; Maybe Schema
</span><a href="Runtime.Types.html#jsonSchema"><span class="hs-identifier hs-var hs-var">jsonSchema</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Schema</span></span><span> </span><span class="hs-comment">-- ^ A JSON schema used for output validation</span><span>
</span><span id="line-110"></span><span class="hs-special">,</span><span> </span><span id="openAs"><span class="annot"><span class="annottext">Settings -&gt; Specified FileType
</span><a href="Runtime.Types.html#openAs"><span class="hs-identifier hs-var hs-var">openAs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Runtime.Types.html#Specified"><span class="hs-identifier hs-type">Specified</span></a></span><span> </span><span class="annot"><a href="Runtime.Types.html#FileType"><span class="hs-identifier hs-type">FileType</span></a></span><span> </span><span class="hs-comment">-- ^ This parameter can be used to specify the parsing behaviour </span><span>
</span><span id="line-111"></span><span>                           </span><span class="hs-comment">-- for files such as @.phenotype@, which should be parsed as 'JSON'.</span><span>
</span><span id="line-112"></span><span>                           </span><span class="hs-comment">-- If left blank, parsing defaults to either file extension </span><span>
</span><span id="line-113"></span><span>                           </span><span class="hs-comment">-- (if it corresponds to one of the 'FileType's), otherwise 'TXTFile'.</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- , startFrom :: Maybe Int -- ^ This parameter specifies how many rows should be skipped. Only works when parsing TXTFile files</span><span>
</span><span id="line-115"></span><span class="hs-special">,</span><span> </span><span id="onError"><span class="annot"><span class="annottext">Settings -&gt; Maybe ErrorOpt
</span><a href="Runtime.Types.html#onError"><span class="hs-identifier hs-var hs-var">onError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#ErrorOpt"><span class="hs-identifier hs-type">ErrorOpt</span></a></span><span> </span><span class="hs-comment">-- ^ Specifies the error logging behaviour</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- , worksheet :: Maybe SheetName -- ^ Used to specify which worksheet should be parsed.</span><span>
</span><span id="line-117"></span><span>                               </span><span class="hs-comment">-- Only works for 'XLSXFile' files. If left blank, defaults to first found worksheet.</span><span>
</span><span id="line-118"></span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679569646"><span id="local-6989586621679569648"><span id="local-6989586621679569650"><span class="annot"><span class="annottext">Int -&gt; Settings -&gt; ShowS
[Settings] -&gt; ShowS
Settings -&gt; String
(Int -&gt; Settings -&gt; ShowS)
-&gt; (Settings -&gt; String) -&gt; ([Settings] -&gt; ShowS) -&gt; Show Settings
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [Settings] -&gt; ShowS
$cshowList :: [Settings] -&gt; ShowS
show :: Settings -&gt; String
$cshow :: Settings -&gt; String
showsPrec :: Int -&gt; Settings -&gt; ShowS
$cshowsPrec :: Int -&gt; Settings -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679569642"><span id="local-6989586621679569644"><span class="annot"><span class="annottext">Settings -&gt; Settings -&gt; Bool
(Settings -&gt; Settings -&gt; Bool)
-&gt; (Settings -&gt; Settings -&gt; Bool) -&gt; Eq Settings
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Settings -&gt; Settings -&gt; Bool
$c/= :: Settings -&gt; Settings -&gt; Bool
== :: Settings -&gt; Settings -&gt; Bool
$c== :: Settings -&gt; Settings -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. Settings -&gt; Rep Settings x)
-&gt; (forall x. Rep Settings x -&gt; Settings) -&gt; Generic Settings
forall x. Rep Settings x -&gt; Settings
forall x. Settings -&gt; Rep Settings x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep Settings x -&gt; Settings
$cfrom :: forall x. Settings -&gt; Rep Settings x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679569637"><span class="annot"><span class="hs-identifier hs-type">FromJSON</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#Settings"><span class="hs-identifier hs-type">Settings</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621679569636"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser Settings
</span><a href="#local-6989586621679569636"><span class="hs-identifier hs-var hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Object</span></span><span> </span><span id="local-6989586621679569635"><span class="annot"><span class="annottext">v :: Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe LibFunctions
-&gt; Maybe Schema
-&gt; Specified FileType
-&gt; Maybe ErrorOpt
-&gt; Settings
</span><a href="Runtime.Types.html#Settings"><span class="hs-identifier hs-var">Settings</span></a></span><span>
</span><span id="line-122"></span><span>      </span><span class="annot"><span class="annottext">(Text
 -&gt; Maybe LibFunctions
 -&gt; Maybe Schema
 -&gt; Specified FileType
 -&gt; Maybe ErrorOpt
 -&gt; Settings)
-&gt; Parser Text
-&gt; Parser
     (Maybe LibFunctions
      -&gt; Maybe Schema
      -&gt; Specified FileType
      -&gt; Maybe ErrorOpt
      -&gt; Settings)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span>  </span><span class="annot"><span class="hs-string">&quot;processFunction&quot;</span></span><span>
</span><span id="line-123"></span><span>      </span><span class="annot"><span class="annottext">Parser
  (Maybe LibFunctions
   -&gt; Maybe Schema
   -&gt; Specified FileType
   -&gt; Maybe ErrorOpt
   -&gt; Settings)
-&gt; Parser (Maybe LibFunctions)
-&gt; Parser
     (Maybe Schema -&gt; Specified FileType -&gt; Maybe ErrorOpt -&gt; Settings)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe LibFunctions)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;libraryFunctions&quot;</span></span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">Parser
  (Maybe Schema -&gt; Specified FileType -&gt; Maybe ErrorOpt -&gt; Settings)
-&gt; Parser (Maybe Schema)
-&gt; Parser (Specified FileType -&gt; Maybe ErrorOpt -&gt; Settings)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Schema)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;jsonSchema&quot;</span></span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="annottext">Parser (Specified FileType -&gt; Maybe ErrorOpt -&gt; Settings)
-&gt; Parser (Specified FileType)
-&gt; Parser (Maybe ErrorOpt -&gt; Settings)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser (Parser (Specified FileType)) -&gt; Parser (Specified FileType)
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Parser (Parser (Specified FileType))
 -&gt; Parser (Specified FileType))
-&gt; Parser (Parser (Specified FileType))
-&gt; Parser (Specified FileType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
-&gt; Maybe SheetName -&gt; Maybe Text -&gt; Parser (Specified FileType)
</span><a href="Runtime.Types.html#parseFileType"><span class="hs-identifier hs-var">parseFileType</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int
 -&gt; Maybe SheetName -&gt; Maybe Text -&gt; Parser (Specified FileType))
-&gt; Parser (Maybe Int)
-&gt; Parser
     (Maybe SheetName -&gt; Maybe Text -&gt; Parser (Specified FileType))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Int)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;startFrom&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser
  (Maybe SheetName -&gt; Maybe Text -&gt; Parser (Specified FileType))
-&gt; Parser (Maybe SheetName)
-&gt; Parser (Maybe Text -&gt; Parser (Specified FileType))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe SheetName)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;worksheet&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser (Maybe Text -&gt; Parser (Specified FileType))
-&gt; Parser (Maybe Text) -&gt; Parser (Parser (Specified FileType))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe Text)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;openAs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="annottext">Parser (Maybe ErrorOpt -&gt; Settings)
-&gt; Parser (Maybe ErrorOpt) -&gt; Parser Settings
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679569635"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; Parser (Maybe ErrorOpt)
forall a. FromJSON a =&gt; Object -&gt; Text -&gt; Parser (Maybe a)
</span><span class="hs-operator hs-var">.:?</span></span><span> </span><span class="annot"><span class="hs-string">&quot;onError&quot;</span></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">parseJSON</span></span><span> </span><span id="local-6989586621679569634"><span class="annot"><span class="annottext">o :: Value
</span><a href="#local-6989586621679569634"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser Settings
forall a. Value -&gt; Parser a
</span><span class="hs-identifier hs-var">unexpected</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679569634"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-comment">{-|
Defines the output behaviour, either writing to a JSON/SQL file or a database. 
-}</span><span>
</span><span id="line-132"></span><span class="hs-keyword">data</span><span> </span><span id="DataOutputOpt"><span class="annot"><a href="Runtime.Types.html#DataOutputOpt"><span class="hs-identifier hs-var">DataOutputOpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JSONFileOutputOpt"><span class="annot"><a href="Runtime.Types.html#JSONFileOutputOpt"><span class="hs-identifier hs-var">JSONFileOutputOpt</span></a></span></span><span>
</span><span id="line-133"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="DBOutputOpt"><span class="annot"><a href="Runtime.Types.html#DBOutputOpt"><span class="hs-identifier hs-var">DBOutputOpt</span></a></span></span><span> </span><span class="annot"><a href="DB.html#ConnInfo"><span class="hs-identifier hs-type">ConnInfo</span></a></span><span> </span><span class="annot"><a href="DB.Types.html#SourceID"><span class="hs-identifier hs-type">SourceID</span></a></span><span> </span><span class="hs-comment">-- ^ If writing to a database, the `ConnInfo` and `SourceID` paramameters must be supplied</span><span>
</span><span id="line-134"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="SQLFileOutputOpt"><span class="annot"><a href="Runtime.Types.html#SQLFileOutputOpt"><span class="hs-identifier hs-var">SQLFileOutputOpt</span></a></span></span><span> </span><span class="annot"><a href="DB.Types.html#SourceID"><span class="hs-identifier hs-type">SourceID</span></a></span><span> </span><span class="hs-comment">-- ^ If writing to an SQL file, the `SourceID` paramameter must be supplied</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">{-|
Sum type for the handles for different output options. 
-}</span><span>
</span><span id="line-139"></span><span class="hs-keyword">data</span><span> </span><span id="DataOutput"><span class="annot"><a href="Runtime.Types.html#DataOutput"><span class="hs-identifier hs-var">DataOutput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JSONFileOutput"><span class="annot"><a href="Runtime.Types.html#JSONFileOutput"><span class="hs-identifier hs-var">JSONFileOutput</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handle</span></span><span> </span><span class="hs-comment">-- ^ `Handle` points to an open JSON file</span><span>
</span><span id="line-140"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679569627"><span class="annot"><a href="#local-6989586621679569627"><span class="hs-identifier hs-type">con_t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="DB.html#DBConn"><span class="hs-identifier hs-type">DBConn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679569627"><span class="hs-identifier hs-type">con_t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="DBOutput"><span class="annot"><a href="Runtime.Types.html#DBOutput"><span class="hs-identifier hs-var">DBOutput</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span>
</span><span id="line-141"></span><span>                    </span><span id="con"><span class="annot"><span class="annottext">()
</span><a href="Runtime.Types.html#con"><span class="hs-identifier hs-var hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679569627"><span class="hs-identifier hs-type">con_t</span></a></span><span> </span><span class="hs-comment">-- ^ Database connection handle, depends on the backend (MySQL/Postgres).</span><span>
</span><span id="line-142"></span><span>                  </span><span class="hs-special">,</span><span> </span><span id="sourceID"><span class="annot"><span class="annottext">DataOutput -&gt; SourceID
</span><a href="Runtime.Types.html#sourceID"><span class="hs-identifier hs-var hs-var">sourceID</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="DB.Types.html#SourceID"><span class="hs-identifier hs-type">SourceID</span></a></span><span>
</span><span id="line-143"></span><span>                  </span><span class="hs-special">,</span><span> </span><span id="fileID"><span class="annot"><span class="annottext">DataOutput -&gt; FileID
</span><a href="Runtime.Types.html#fileID"><span class="hs-identifier hs-var hs-var">fileID</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="DB.Types.html#FileID"><span class="hs-identifier hs-type">FileID</span></a></span><span>
</span><span id="line-144"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-145"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span id="SQLFileOutput"><span class="annot"><a href="Runtime.Types.html#SQLFileOutput"><span class="hs-identifier hs-var">SQLFileOutput</span></a></span></span><span> </span><span class="annot"><a href="DB.Types.html#SourceID"><span class="hs-identifier hs-type">SourceID</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handle</span></span><span> </span><span class="hs-comment">-- ^ `Handle` points to an open SQL file</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-keyword">newtype</span><span> </span><span id="ErrorHandling"><span class="annot"><a href="Runtime.Types.html#ErrorHandling"><span class="hs-identifier hs-var">ErrorHandling</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ErrorHandling"><span class="annot"><a href="Runtime.Types.html#ErrorHandling"><span class="hs-identifier hs-var">ErrorHandling</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Runtime.Types.html#ErrorOpt"><span class="hs-identifier hs-type">ErrorOpt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Runtime.Types.html#DataOutput"><span class="hs-identifier hs-type">DataOutput</span></a></span><span class="hs-special">)</span></pre></body></html>